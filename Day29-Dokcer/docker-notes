Wt is Dockerfile?
============

Docker can build images automatically by reading the instructions from a Dockerfile. A Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image

Recipe:- dockerfile

Dish :- Docker image

Cooking process;- docker build

Why Dockerfile?
============

	Ã˜ To run same app in dev, qa, stag and prod.
	Ã˜ For consistent env (java, nodejs, python etc)
	Ã˜ To reproducible builds

Dockerfile ensures ðŸ‘‡
================

	Ã˜ Same env everywhere 
	Ã˜ Automated image creation
	Ã˜ Version control of infrastructure 
	Ã˜ Easy cicd integration 

Dockerfile   - file

	1. FROM
=========

	Ã˜  it is used to specify a base image for the container , without having a base image you cant create any container

	Ã˜ You are going to choosing a platform where you want to host or run your app is called FROM.


FROM  python:3.15.0a6-trixie

FROM openjdk:27-ea-oraclelinux8

FROM node:latest

FROM node:18.2

FROM  ubuntu:latest

FROM amazon-linux:latest

=========================================================================================


	2. WORDKIR
============

	Ã˜ It is used to specify a working directory inside the container to keep or container app src, dependencies, libraries etc.

WORKDIR  /app

WORKDIR /sample

WORKDIR /murali

WOKRDIR /amazon 

=========================================================================================

	3. RUN 
========

Commands are two type

	Ã˜ Some commands has to be execute while building docker image 
	Ã˜ Some commands has to be execute while creating the container

	1. Build time commands:-  it has to execute only while building docker image
	2. Run time commands:- it has to execute only while creating the container 

	Ã˜ It is used to execute commands while building docker image

RUN  apt update -y

RUN apt install apache2 -y

RUN yum update -y

RUN yum install httpd -y

RUN npm install

RUN pip install requirements.txt

===========================================================================================

	4. COPY 
========

	Ã˜ It is used to copy app src, libraries, dependencies and conf file/folder from host or local server to container machine
	Ã˜ Copy instruction always looking for two kind of locations - one your src location and destination location 

COPY <SRC-LOCT>  <DEST-LOCT>

COPY  .   /app

COPY . .

COPY  server.js  .  OR /app

=============================================================================================

	5. EXPOSE 
==========

	Ã˜ It is used to specify app or container port number 

EXPOSE 8080

EXPOSE 9000

EXPOSE 80

EXPOSE 9090

EXPOSE 5000

EXPOSE 3000

================================================================================================

	6. CMD
========

	Ã˜ It is used to execute commands while creating the container to run the application inside the container.
	Ã˜ CMD will overwrite commands
	Ã˜ You can have multiple CMD instructions in a dockerfile 
	Ã˜ Last CMD instruction only will be executed by  docker
	

Run time commands:- it has to execute only while creating the container 


node server.js

node app.js

node start


CMD ["node", "server.js"]

CMD ["node",  "app.js"]

CMD ["pip", "app.py"]

================================================================================================

	7. ENTRYPOINT
===============

Ã˜ It is used to execute commands while creating the container to run the application inside the container.
Ã˜ It will never overwrite any command

ENTRYPOINT ["node", "app.js"]

How dockerfile works?
=================

	Ã˜ Docker always reads instructions one by one (top to bottom)
	Ã˜ A Dockerfile must begin with a FROM instruction
	Ã˜ a valid Dockerfile must start with a FROM instruction
	Ã˜ Docker creates a temporary container
	Ã˜ It will execute that instructions 
	Ã˜ It will save the result as a new image layer
	Ã˜ It will remove the temporary container 
	Ã˜ Final output = docker image


To deploying a web app wt we did?
=========================

	1. Updated os
	2. Installed apache2 web server
	3. Moved or copied  src to /var/www/html
	4. We have updated src 


=====================================


ENTRYPOINT [ "apachectl", "-D", "FOREGROUND" ]
 apachectl :- it is a control script for manaing apache http server , it is used for to start apache, stop apche , restart apache and run apache in specific modes

-D FOREGROUND :- by default apache will run in background ( daemon mode), to keep running the container in background


How to create container
=================

docker run -d --name <c-name>  -p <host-port-no:container-port-no>  <i-name> 






docker run :- firstly it will pull the image , secondly it will create the container, thirdly it will start the container.

-d :- detached  mode , you are going to running ur container in a background .

--name :- you must give a name to the container and container name must be unique 

-p :- port mapping 

Host port no:- it will be decided by DevOps team, it is  our wish and host port number should be unique.

App or container port:- it will be decided by Dev Team and same port number you can for n.of containers.


Image name:- you must specify your image name.









